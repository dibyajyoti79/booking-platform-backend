enum BookingStatus {
  PENDING
  CONFIRMED
  CANCELLED
}

model Booking {
  id             Int             @id @default(autoincrement())
  userId         Int
  hotelId        Int
  bookingAmount  Decimal
  bookingStatus  BookingStatus   @default(PENDING)
  checkIn        DateTime
  checkOut       DateTime
  totalGuests    Int
  createdAt      DateTime        @default(now())
  updatedAt      DateTime        @updatedAt
  idempotencyKey IdempotencyKey?
}

model IdempotencyKey {
  id        Int      @id @default(autoincrement())
  idemKey   String   @unique
  bookingId Int      @unique
  booking   Booking? @relation(fields: [bookingId], references: [id])
  finalized Boolean  @default(false)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
